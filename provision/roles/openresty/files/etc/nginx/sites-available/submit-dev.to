# logs:  access_log /var/log/nginx/access.log;
#        error_log /var/log/nginx/error.log;
server{
    listen 8080;
    
    location / {
        default_type text/html;
        content_by_lua 'ngx.say("Access granted")';
    }
}
 
server {

    listen   80;
    server_name *.mysubmit.to;

    location / {
        access_by_lua_file /etc/nginx/lua/sso.lua;
        proxy_pass http://localhost:8080;
#       proxy_pass http://127.0.0.1:8000/;
#       proxy_set_header Host $http_host;
    }

    location /auth {
        default_type text/html;
        content_by_lua 'ngx.say("There is no cookie")';
#       proxy_pass http://127.0.0.1:8000/accounts/login/;
#       proxy_set_header Host $http_host;
    }

    location /error {
        default_type text/html;
        content_by_lua 'ngx.say("failed to connect to Redis Server")';
    }
     
#    location /clientapp {
#       access_by_lua_file lua/sso.lua;
#
#       proxy_pass http://127.0.0.1:8001/;
#       proxy_set_header Host $http_host;
#    }
}
